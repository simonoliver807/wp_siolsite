var ButtonModule=function(){return{setButtonID:function(t){this.buttonID=t,this.buttonUpdateID=t,this.disabledBool=!1,this.buttonValue=1},setButtonValue:function(){5===this.buttonValue?this.buttonValue=1:this.buttonValue+=1}}},DoughNutModule=function(){return{setDoughnutID:function(t,e,a){this.doughnutID=t,this.doughnutObject={},this.chartStatus=!0,this.ordialPosition=e,this.totalScore=0,this.data=a}}},UIModule=function(){var t,e=[],a=[],s=[];return{init:function(t,e,a){"ie9"==document.getElementsByTagName("body")[0].getAttribute("browser")&&(document.getElementsByTagName("body")[0].className="cms-bootstrap ie9",this.ie9="ie9");var s=new TooltipModulesto;this.highLight=new HighLight,this.currentElement=0,this.elementWidth=105,this.windowWidth=$(window).width(),this.windowResizeBool=!1,this.bodyRemoveHighLight=!1,this.numberOfGreyOuts=e,this.elementLabels=["Arsenal","Chelsea","Liverpool","Portsmouth","Man United","Man City","Leeds","Bournemouth"],this.buttonLabels=["Manager","Goal Keeper & Defence","Midfield","league Position & Recent Form","Attack"],this.scorerValues=[],this.chartData=document.getElementById("jsonInput").value,this.chartData=JSON.parse(this.chartData),"ui3"==a?this.numberOfElements=e:this.numberOfElements=t,this.numberOfButtons=e,this.numberOfCharts=2,this.uiType=a,"ui1"==this.uiType?(document.getElementById("game-content").className="ui1",this.slider()):"ui2"==this.uiType?(document.getElementById("game-content").className="ui2",this.scorer()):(this.uiType="ui3")&&(document.getElementById("game-content").className="ui3",this.sliderYN()),$(".custom-col-md-4").mouseover(function(){s.disableTooltip()}),$(".custom-col-md-3").mouseover(function(){s.disableTooltip()}),document.getElementById("fixedHeader").addEventListener("mouseover",function(){s.disableTooltip()},!1),$("footer").mouseover(function(t){t.stopPropagation(),s.disableTooltip()}),$(".leftRightButton").on("mouseOver",function(t){t.stopPropagation(),s.disableTooltip()}),$(".sliderContainer").on("mouseover",function(t){t.stopPropagation(),s.tooltipActivate("",this.id)}),$(".sliderContainerYN").on("mouseover",function(t){t.stopPropagation(),s.tooltipActivate("",this.id)}),$("#modules").on("mouseout",function(t){t.stopPropagation(),s.disableTooltip("",this.id)}),this.windowWidth<=1100&&$(".sliderNavContainer1200").css("margin","0"),this.windowWidth>1100&&$(".sliderNavContainer1200").css("margin","0 auto"),this.windowWidth<=1200&&(document.getElementById("sliderLabel4").className=addClass("sliderLabel4","hideVisibility"))},slider:function(){for(var t=new TemplateModule,o=["Arsenal","Chelsea","Liverpool","Portsmouth","Man United","Man City","Leeds","Bournemouth"],n=0;n<this.numberOfElements;n++)$("#sliderNavWrapper").append('<li id="sliderLabel'+n+'" class="sliderLabelContainer">'+o[n]+"</li>");for(var n=0;n<this.numberOfButtons;n++)a[n]=new ButtonModule,a[n].setButtonID(n),t.createButton(n,this.buttonLabels[n]);for(var l=0;l<this.numberOfButtons;l++){for(var i=[],n=0;n<this.numberOfElements;n++){i[n]=new SliderModule;var u=l+"_"+n;i[n].setSliderID(u),t.createSlider(u,l,o[n],this.windowWidth)}e.push(i)}for(var n=0;n<this.numberOfElements;n++){s[n]=new DoughNutModule;var r=this.getOrdinalPosition(n+1);s[n].setDoughnutID(n,r,this.chartData),s[n].doughnutObject=t.createDoughnut(n,this.chartData,o[n],r)}if($("canvas").css({width:"100%",height:"100%"}),this.windowWidth<992)updateClassNamesAdd("ui-slider-handle"," fa fa-minus-square fa-lg fa-rotate-90 handleStyle"),updateClassNamesAdd("tooltip1"," top"),this.windowResizeBool=!0;else{updateClassNamesAdd("ui-slider-handle"," fa fa-minus-square fa-2x handleStyle"),updateClassNamesAdd("tooltip1"," right");var d=this.elementWidth*this.numberOfElements+30;$(".elementWrapper").css("width",d),$(".sliderNavWrapper").css("width",d)}this.updateChartPositions()},scorer:function(){for(var t=this,o=new TemplateModule,n=0;n<this.numberOfElements;n++)$("#sliderNavWrapper").append('<li id="sliderLabel'+n+'" class="sliderLabelContainer">'+this.elementLabels[n]+"</li>");for(var l=[],n=0;n<this.numberOfElements;n++)l[n]=n+1;for(var n=0;n<this.numberOfButtons;n++)a[n]=new ButtonModule,a[n].setButtonID(n),o.createButton(n,this.buttonLabels[n]),this.scorerValues.push(l);for(var i=0;i<this.numberOfButtons;i++){for(var u=[],n=0;n<this.numberOfElements;n++){u[n]=new ScorerModule;var r=i+"_"+n;u[n].setscorerID(r,this.numberOfElements),o.createScorer(r,i,this.elementLabels[n],this.windowWidth)}e.push(u)}for(var n=0;n<this.numberOfElements;n++){s[n]=new DoughNutModule;var d=this.getOrdinalPosition(n+1);s[n].setDoughnutID(n,d,this.chartData),s[n].doughnutObject=o.createDoughnut(n,this.chartData,this.elementLabels[n],d)}$(".scorer").on("click",function(){t.setScorerValue(this.id)}),$("canvas").css({width:"100%",height:"100%"});var h=this.elementWidth*this.numberOfElements+30;$(".elementWrapper").css("width",h),$(".sliderNavWrapper").css("width",h),this.updateChartPositions()},sliderYN:function(){var t=["No","Yes"],o=["Self-determination","Economy","Immigration","Stiff Upper Lip","Relationship with USA"],n=new TemplateModule;this.windowResizeBool=!0;for(var l=0;l<this.numberOfbuttons;l++)$("#sliderNavWrapper").append('<li class="sliderLabelContainer">'+sliderLabels[l]+"</li>");for(var l=0;l<this.numberOfButtons;l++)a[l]=new ButtonModule,a[l].setButtonID(l),n.createButton(l,o[l]),e[l]=new SliderModuleYN,e[l].setSliderID(l),n.createSliderYN(l);for(var l=0;l<this.numberOfCharts;l++){s[l]=new DoughNutModule;var i=this.getOrdinalPosition(l+1);s[l].setDoughnutID(l,i,this.chartData),s[l].doughnutObject=n.createDoughnut(l,this.chartData,t[l],i)}$(".navButtonContainer").css("display","none"),$(".labelsBackground").css("display","none"),$("canvas").css({width:"100%",height:"100%"});for(var l=0;l<this.numberOfButtons;l++)document.getElementById("sliderID"+l).className=addClass("sliderID"+l," overlaydiv overlayDiv1 handleStyle");this.windowWidth<992?updateClassNamesAdd("ui-slider-handle"," fa fa-minus-square fa-lg fa-rotate-90 handleStyle"):updateClassNamesAdd("ui-slider-handle"," fa fa-minus-square fa-2x fa-rotate-90 handleStyle"),this.updateChartPositions()},setButtonValue:function(t){var s=a[t];s.setButtonValue();for(var o=a[t].buttonValue,n=0;n<this.numberOfElements;n++)e[t][n].setValues("",o);1===a[t].buttonValue?$("#moduleButton"+t).children().removeClass("overlayDiv5"):$("#moduleButton"+t).children().removeClass("overlayDiv"+(a[t].buttonValue-1)),$("#moduleButton"+t).children().addClass("overlayDiv"+a[t].buttonValue),this.updateButtonValue(t)},setSliderValue:function(t,o){e[o[0]][o[1]].setValues(t,a[o[0]].buttonValue),this.updateTotal(o[[1]]);var n=s[o[1]].doughnutObject,l=a[o[0]].buttonUpdateID,i=2*parseInt(l),u=i+1,t=e[o[0]][o[1]].totalValue/10,r=10*a[o[0]].buttonValue-t;n.segments[i].value=r,n.segments[u].value=t,n.update()},updateButtonValue:function(t){if(null!==a[t].buttonUpdateID)for(var o=a[t].buttonUpdateID,n=2*parseInt(o),l=n+1,i=0;i<this.numberOfElements;i++){var u=s[i].doughnutObject,r=e[t][i].totalValue/10,d=10*a[t].buttonValue-r;u.segments[n].value=d,u.segments[l].value=r,u.update(),this.updateTotal(i)}else for(var i=0;i<this.numberOfElements;i++){var u=s[i].doughnutObject,r=0,d=0;this.updateTotal(i)}this.updateChartPositions()},updateTotal:function(t){for(var o=0,n=0,l=0;l<this.numberOfButtons;l++)a[l].disabledBool||(o+=e[l][t].totalValue,n+=a[l].buttonValue);var i=Math.round(100*(o/(100*n)));s[t].totalScore=i,document.getElementById("sliderTotal"+t).innerHTML=i,document.getElementById("sliderTotalSmall"+t).innerHTML=i},removeChartSegment:function(t){for(var e=2*a[t].buttonUpdateID,o=0;o<s.length;o++)s[o].doughnutObject.removeData(e),s[o].doughnutObject.removeData(e)},addChartSegment:function(t){t=2*parseInt(t);for(var e=t+1,o=0;o<s.length;o++){var n=s[o].data;s[o].doughnutObject.addData({value:1,color:n[t].color},String(t)),s[o].doughnutObject.addData({value:0,color:n[e].color},e)}for(var o=0;o<s.length;o++)for(var l=s[o],i=0,u=1,r=0;r<this.numberOfButtons;r++){var d=2*r,h=d+1,c=r;a[c].disabledBool||(l.doughnutObject.segments[i].fillColor=l.data[d].color,l.doughnutObject.segments[i].highlightColor=l.data[d].color,l.doughnutObject.segments[u].fillColor=l.data[h].color,l.doughnutObject.segments[u].highlightColor=l.data[h].color,i+=2,u=i+1)}for(var o=0;o<s.length;o++)s[o].doughnutObject.update()},updateChartPositions:function(){t="ui3"==this.uiType?this.numberOfCharts:this.numberOfElements;for(var e=0;e<t;e++)document.getElementById("canvasContainer"+e).setAttribute("totalScore",s[e].totalScore);tinysort("ul.results>li",{attr:"totalScore",order:"desc"}),$(".results").children("li").each(function(){this.className=""});var a=1,o=this;$(".results").children("li").each(function(){var t=o.getOrdinalPosition(a),e=this.id;switch(e=e.match(/[0-9]+/g),$("#ordianlPosition"+e[0]).text(t),document.getElementById("sliderTotalSmall"+e[0]).className="badge",a){case 1:"ui3"!==o.uiType&&$("#canvas"+e[0]).css("display","block"),document.getElementById("sliderTotalSmall"+e[0]).className=addClass("sliderTotalSmall"+e[0],"goldBadge"),this.className="first";break;case 2:"ui3"!==o.uiType&&$("#canvas"+e[0]).css("display","none"),document.getElementById("sliderTotalSmall"+e[0]).className=addClass("sliderTotalSmall"+e[0],"silverBadge"),this.className="defaultChartHeader";break;case 3:$("#canvas"+e[0]).css("display","none"),document.getElementById("sliderTotalSmall"+e[0]).className=addClass("sliderTotalSmall"+e[0],"bronzeBadge"),this.className="defaultChartHeader";break;default:$("#canvas"+e[0]).css("display","none"),this.className="defaultChartHeader"}a+=1})},getOrdinalPosition:function(t){var e=["th","st","nd","rd"],a=t%100;return t+(e[(a-20)%10]||e[a]||e[0])},getElementArray:function(){return e},getChartArray:function(){return s},getButtonArray:function(){return a},setScorerValue:function(t){var t=t.match(/[0-9]+/g),o=e[t[0]][t[1]].opValue,n=[],l=null,i=this.scorerValues[t[0]][this.scorerValues[t[0]].length-1];if(0==o){for(var u=0;u<this.scorerValues[t[0]].length;u++)0==u?l=this.scorerValues[t[0]][u]:n.push(this.scorerValues[t[0]][u]);this.scorerValues[t[0]]=n,e[t[0]][t[1]].setScorerValue=this.numberOfElements-(l-1),e[t[0]][t[1]].opValue=l}else if(o>i||"undefined"==typeof i){l=0;for(var u=0;u<this.scorerValues[t[0]].length;u++)n.push(this.scorerValues[t[0]][u]);n.push(o),this.scorerValues[t[0]]=n,0!=l?e[t[0]][t[1]].setScorerValue=this.numberOfElements-(l-1):e[t[0]][t[1]].setScorerValue=0,e[t[0]][t[1]].opValue=l}else{for(var u=0;u<this.scorerValues[t[0]].length;u++)o<this.scorerValues[t[0]][u]&&null===l?(l=this.scorerValues[t[0]][u],n.push(o)):n.push(this.scorerValues[t[0]][u]);e[t[0]][t[1]].setScorerValue=this.numberOfElements-(l-1),e[t[0]][t[1]].opValue=l,this.scorerValues[t[0]]=n}e[t[0]][t[1]].setValues(f,a[t[0]].buttonValue);var r=this.getOrdinalPosition(l);0!==e[t[0]][t[1]].opValue?document.getElementById("scorerValue"+t[0]+"_"+t[1]).innerHTML=r:document.getElementById("scorerValue"+t[0]+"_"+t[1]).innerHTML="",this.updateTotalScorer(t[[1]]);var d=s[t[1]].doughnutObject,h=a[t[0]].buttonUpdateID,c=2*parseInt(h),m=c+1,f=e[t[0]][t[1]].totalValue/10,v=10*a[t[0]].buttonValue-f;d.segments[c].value=v,d.segments[m].value=f,d.update(),this.updateChartPositions()},updateTotalScorer:function(t){for(var o=0,n=0,l=0;l<this.numberOfButtons;l++)a[l].disabledBool||(o+=e[l][t].totalValue,n+=a[l].buttonValue);var i=Math.round(100*(o/(100*n)));s[t].totalScore=i,document.getElementById("sliderTotal"+t).innerHTML=i,document.getElementById("sliderTotalSmall"+t).innerHTML=i},setSliderYNValue:function(t,o){var n,l;e[o].setValues(t,a[o].buttonValue),e[o].isNegetiveBool?e[o].isNegetiveBool&&(n=0,l=1):(n=1,l=0);var i=s[n].doughnutObject,u=a[o[0]].buttonUpdateID,r=2*parseInt(u),d=r+1,t=e[o].totalValue/10,h=10*a[o].buttonValue-t;i.segments[r].value=h,i.segments[d].value=t,i.update();var c=s[l].doughnutObject,m=0,f=10*a[o].buttonValue-m;c.segments[r].value=f,c.segments[d].value=m,c.update(),this.updateTotalYN()},setButtonValueYN:function(t){var s=a[t];s.setButtonValue();for(var o=a[t].buttonValue,n=0;n<this.numberOfElements;n++)e[t].setValues("",o);1===a[t].buttonValue?$("#moduleButton"+t).children().removeClass("overlayDiv5"):$("#moduleButton"+t).children().removeClass("overlayDiv"+(a[t].buttonValue-1)),$("#moduleButton"+t).children().addClass("overlayDiv"+a[t].buttonValue),this.updateButtonValueYN(t)},updateButtonValueYN:function(t){for(var o,n,l=t,n=0;n<this.numberOfCharts;n++){if(o=0,null!==a[t].buttonUpdateID){var i=a[t].buttonUpdateID,u=2*parseInt(i),r=u+1,d=s[n].doughnutObject;e[l].isNegetiveBool&&0==n&&(o=e[l].totalValue/10),e[l].isNegetiveBool||1!=n||(o=e[l].totalValue/10);var h=10*a[t].buttonValue-o;d.segments[u].value=h,d.segments[r].value=o,d.update(),this.updateTotalYN()}else this.updateTotalYN();this.updateChartPositions()}},updateTotalYN:function(){for(var t,o=0,n=0,t=0;t<this.numberOfCharts;t++){o=0,n=0;for(var l=0;l<this.numberOfButtons;l++)a[l].disabledBool||(e[l].isNegetiveBool&&0==t&&(o+=e[l].totalValue),e[l].isNegetiveBool||1!=t||(o+=e[l].totalValue),n+=a[l].buttonValue);var i=Math.round(100*(o/(100*n)));s[t].totalScore=i,document.getElementById("sliderTotal"+t).innerHTML=i,document.getElementById("sliderTotalSmall"+t).innerHTML=i}}}};