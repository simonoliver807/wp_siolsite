define([],function(){function t(t,e){var a,o,n;n=t,a=t.indexOf("?")<0?"?":"&";for(o in e)n+=a+o+"="+encodeURIComponent(e[o]),a="&";return n}function e(t,e){var a=null!=t.options[e]?t.options[e]:null,o=null!=t.locale[e]?t.locale[e]:null;if("holidays"==e&&t.options.merge_holidays){var n={};return r.extend(!0,n,o?o:d.holidays),a&&r.extend(!0,n,a),n}return null!=a?a:null!=o?o:d[e]}function a(t,n){var i=[],l=e(t,"holidays");for(var d in l)i.push(d+":"+l[d]);if(i.push(n),i=i.join("|"),i in a.cache)return a.cache[i];var h=[];return r.each(l,function(t,e){var a=null,i=null,l=!1;if(r.each(t.split(">"),function(e,r){var d,h=null;if(d=/^(\d\d)-(\d\d)$/.exec(r))h=new Date(n,parseInt(d[2],10)-1,parseInt(d[1],10));else if(d=/^(\d\d)-(\d\d)-(\d\d\d\d)$/.exec(r))parseInt(d[3],10)==n&&(h=new Date(n,parseInt(d[2],10)-1,parseInt(d[1],10)));else if(d=/^easter(([+\-])(\d+))?$/.exec(r))h=s(n,d[1]?parseInt(d[1],10):0);else if(d=/^(\d\d)([+\-])([1-5])\*([0-6])$/.exec(r)){var p=parseInt(d[1],10)-1,c=d[2],u=parseInt(d[3]),m=parseInt(d[4]);switch(c){case"+":for(var f=new Date(n,p,-6);f.getDay()!=m;)f=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1);h=new Date(f.getFullYear(),f.getMonth(),f.getDate()+7*u);break;case"-":for(var f=new Date(n,p+1,7);f.getDay()!=m;)f=new Date(f.getFullYear(),f.getMonth(),f.getDate()-1);h=new Date(f.getFullYear(),f.getMonth(),f.getDate()-7*u)}}if(!h)return o("Unknown holiday: "+t),l=!0,!1;switch(e){case 0:a=h;break;case 1:if(h.getTime()<=a.getTime())return o("Unknown holiday: "+t),l=!0,!1;i=h;break;default:return o("Unknown holiday: "+t),l=!0,!1}}),!l){var d=[];if(i)for(var p=new Date(a.getTime());p.getTime()<=i.getTime();p.setDate(p.getDate()+1))d.push(new Date(p.getTime()));else d.push(a);h.push({name:e,days:d})}}),a.cache[i]=h,a.cache[i]}function o(t){"object"==r.type(window.console)&&"function"==r.type(window.console.warn)&&window.console.warn("[Bootstrap-Calendar] "+t)}function n(t,e){return this.options=r.extend(!0,{position:{start:new Date,end:new Date}},l,t),this.setLanguage(this.options.language),this.context=e,e.css("width",this.options.width).addClass("cal-context"),this.view(),this}function i(t,e,a,o){t.stopPropagation();var e=r(e),n=e.closest(".cal-cell"),i=n.closest(".cal-before-eventlist"),s=n.data("cal-row");e.fadeOut("fast"),a.slideUp("fast",function(){var t=r(".events-list",n);a.html(o.options.templates["events-list"]({cal:o,events:o.getEventsBetween(parseInt(t.data("cal-start")),parseInt(t.data("cal-end")))})),i.after(a),o.activecell=r("[data-cal-date]",n).text(),r("#cal-slide-tick").addClass("tick"+s).show(),a.slideDown("fast",function(){r("body").one("click",function(){a.slideUp("fast"),o.activecell=0})})}),setTimeout(function(){r("a.event-item").mouseenter(function(){r('a[data-event-id="'+r(this).data("event-id")+'"]').closest(".cal-cell1").addClass("day-highlight dh-"+r(this).data("event-class"))}),r("a.event-item").mouseleave(function(){r("div.cal-cell1").removeClass("day-highlight dh-"+r(this).data("event-class"))}),o._update_modal()},400)}function s(t,e){var a=t%19,o=Math.floor(t/100),n=t%100,i=Math.floor(o/4),s=o%4,r=Math.floor((o+8)/25),l=Math.floor((o-r+1)/3),d=(19*a+o-i-l+15)%30,h=Math.floor(n/4),p=n%4,c=(32+2*s+2*h-d-p)%7,u=Math.floor((a+11*d+22*c)/451),m=d+c+7*u+114,f=Math.floor(m/31)-1,y=m%31+1;return new Date(t,f,y+(e?e:0),0,0,0)}var r=jQuery;Date.prototype.getWeek=function(t){if(t){var e=new Date(this.valueOf()),a=(this.getDay()+6)%7;e.setDate(e.getDate()-a+3);var o=e.valueOf();return e.setMonth(0,1),4!=e.getDay()&&e.setMonth(0,1+(4-e.getDay()+7)%7),1+Math.ceil((o-e)/6048e5)}var n=new Date(this.getFullYear(),0,1);return Math.ceil(((this.getTime()-n.getTime())/864e5+n.getDay()+1)/7)},Date.prototype.getMonthFormatted=function(){var t=this.getMonth()+1;return t<10?"0"+t:t},Date.prototype.getDateFormatted=function(){var t=this.getDate();return t<10?"0"+t:t},String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,a){return"undefined"!=typeof t[a]?t[a]:e})}),String.prototype.formatNum||(String.prototype.formatNum=function(t){for(var e=""+this;e.length<t;)e="0"+e;return e});var l={tooltip_container:"body",width:"100%",view:"month",day:"now",time_start:"06:00",time_end:"22:00",time_split:"30",events_source:"",events_cache:!1,format12:!1,am_suffix:"AM",pm_suffix:"PM",tmpl_path:"tmpls/",tmpl_cache:!0,classes:{months:{inmonth:"cal-day-inmonth",outmonth:"cal-day-outmonth",saturday:"cal-day-weekend",sunday:"cal-day-weekend",holidays:"cal-day-holiday",today:"cal-day-today"},week:{workday:"cal-day-workday",saturday:"cal-day-weekend",sunday:"cal-day-weekend",holidays:"cal-day-holiday",today:"cal-day-today"}},modal:null,modal_type:"iframe",modal_title:null,views:{year:{slide_events:1,enable:1},month:{slide_events:1,enable:1},week:{enable:1},day:{enable:1}},merge_holidays:!1,display_week_numbers:!0,weekbox:!0,onAfterEventsLoad:function(t){},onBeforeEventsLoad:function(t){t()},onAfterViewLoad:function(t){},onAfterModalShown:function(t){},onAfterModalHidden:function(t){},events:[],templates:{year:"",month:"",week:"",day:""},stop_cycling:!1},d={first_day:2,week_numbers_iso_8601:!1,holidays:{"01-01":"New Year's Day","01+3*1":"Birthday of Dr. Martin Luther King, Jr.","02+3*1":"Washington's Birthday","05-1*1":"Memorial Day","04-07":"Independence Day","09+1*1":"Labor Day","10+2*1":"Columbus Day","11-11":"Veterans Day","11+4*4":"Thanksgiving Day","25-12":"Christmas"}},h={error_noview:"Calendar: View {0} not found",error_dateformat:'Calendar: Wrong date format {0}. Should be either "now" or "yyyy-mm-dd"',error_loadurl:"Calendar: Event URL is not set",error_where:'Calendar: Wrong navigation direction {0}. Can be only "next" or "prev" or "today"',error_timedevide:"Calendar: Time split parameter should divide 60 without decimals. Something like 10, 15, 30",no_events_in_day:"No events in this day.",title_year:"{0}",title_month:"{0} {1}",title_week:"week {0} of {1}",title_day:"{0} {1} {2}, {3}",week:"Week {0}",all_day:"All day",time:"Time",events:"Events",before_time:"Ends before timeline",after_time:"Starts after timeline",m0:"January",m1:"February",m2:"March",m3:"April",m4:"May",m5:"June",m6:"July",m7:"August",m8:"September",m9:"October",m10:"November",m11:"December",ms0:"Jan",ms1:"Feb",ms2:"Mar",ms3:"Apr",ms4:"May",ms5:"Jun",ms6:"Jul",ms7:"Aug",ms8:"Sep",ms9:"Oct",ms10:"Nov",ms11:"Dec",d0:"Sunday",d1:"Monday",d2:"Tuesday",d3:"Wednesday",d4:"Thursday",d5:"Friday",d6:"Saturday"},p="";try{"object"==r.type(window.jstz)&&"function"==r.type(jstz.determine)&&(p=jstz.determine().name(),"string"!==r.type(p)&&(p=""))}catch(t){}a.cache={},n.prototype.setOptions=function(t){r.extend(this.options,t),"language"in t&&this.setLanguage(t.language),"modal"in t&&this._update_modal()},n.prototype.setLanguage=function(t){window.calendar_languages&&t in window.calendar_languages?(this.locale=r.extend(!0,{},h,calendar_languages[t]),this.options.language=t):(this.locale=h,delete this.options.language)},n.prototype._render=function(){this.context.html(""),this._loadTemplate(this.options.view),this.stop_cycling=!1;var t={};t.cal=this,t.day=1,1==e(this,"first_day")?t.days_name=[this.locale.d1,this.locale.d2,this.locale.d3,this.locale.d4,this.locale.d5,this.locale.d6,this.locale.d0]:t.days_name=[this.locale.d0,this.locale.d1,this.locale.d2,this.locale.d3,this.locale.d4,this.locale.d5,this.locale.d6];var a=parseInt(this.options.position.start.getTime()),o=parseInt(this.options.position.end.getTime());switch(t.events=this.getEventsBetween(a,o),this.options.view){case"month":break;case"week":this._calculate_hour_minutes(t);break;case"day":this._calculate_hour_minutes(t)}t.start=new Date(this.options.position.start.getTime()),t.lang=this.locale,this.context.append(this.options.templates[this.options.view](t)),this._update()},n.prototype._format_hour=function(t){var e=t.split(":"),a=parseInt(e[0]),o=parseInt(e[1]),n="";return this.options.format12&&(n=a<12?this.options.am_suffix:this.options.pm_suffix,a%=12,0==a&&(a=12)),a.toString().formatNum(2)+":"+o.toString().formatNum(2)+n},n.prototype._format_time=function(t){return this._format_hour(t.getHours()+":"+t.getMinutes())},n.prototype._calculate_hour_minutes=function(t){var e=this,a=parseInt(this.options.time_split),n=60/a,i=Math.min(n,1);(n>=1&&n%1!=0||n<1&&1440/a%1!=0)&&r.error(this.locale.error_timedevide);var s=this.options.time_start.split(":"),l=this.options.time_end.split(":");t.hours=(parseInt(l[0])-parseInt(s[0]))*i;var d=t.hours*n-parseInt(s[1])/a,h=6e4*a,p=new Date(this.options.position.start.getTime());p.setHours(s[0]),p.setMinutes(s[1]);var c=new Date(this.options.position.end.getTime());c.setHours(l[0]),c.setMinutes(l[1]),t.all_day=[],t.by_hour=[],t.after_time=[],t.before_time=[],r.each(t.events,function(a,n){var i=new Date(parseInt(n.start)),s=new Date(parseInt(n.end));if(n.start_hour=e._format_time(i),n.end_hour=e._format_time(s),n.start<p.getTime()&&(o(1),n.start_hour=i.getDate()+" "+e.locale["ms"+i.getMonth()]+" "+n.start_hour),n.end>c.getTime()&&(o(1),n.end_hour=s.getDate()+" "+e.locale["ms"+s.getMonth()]+" "+n.end_hour),n.start<p.getTime()&&n.end>c.getTime())return void t.all_day.push(n);if(n.end<p.getTime())return void t.before_time.push(n);if(n.start>c.getTime())return void t.after_time.push(n);var r=p.getTime()-n.start;r>=0?n.top=0:n.top=Math.abs(r)/h;var l=Math.abs(d-n.top),u=(n.end-n.start)/h;r>=0&&(u=(n.end-p.getTime())/h),n.lines=u,u>l&&(n.lines=l),t.by_hour.push(n)})},n.prototype._hour_min=function(t){var e=this.options.time_start.split(":"),a=parseInt(this.options.time_split),o=60/a;return 0==t?o-parseInt(e[1])/a:o},n.prototype._hour=function(t,e){var a=this.options.time_start.split(":"),o=parseInt(this.options.time_split),n=""+(parseInt(a[0])+t*Math.max(o/60,1)),i=""+o*e;return this._format_hour(n.formatNum(2)+":"+i.formatNum(2))},n.prototype._week=function(t){this._loadTemplate("week-days");var a={},o=parseInt(this.options.position.start.getTime()),n=parseInt(this.options.position.end.getTime()),i=[],s=this,l=e(this,"first_day");return r.each(this.getEventsBetween(o,n),function(t,e){e.start_day=new Date(parseInt(e.start)).getDay(),1==l&&(e.start_day=(e.start_day+6)%7),e.end-e.start<=864e5?e.days=1:e.days=(e.end-e.start)/864e5,e.start<o&&(e.days=e.days-(o-e.start)/864e5,e.start_day=0),e.days=Math.ceil(e.days),e.start_day+e.days>7&&(e.days=7-e.start_day),i.push(e)}),a.events=i,a.cal=this,s.options.templates["week-days"](a)},n.prototype._month=function(t){this._loadTemplate("year-month");var e={cal:this},a=t+1;e.data_day=this.options.position.start.getFullYear()+"-"+(a<10?"0"+a:a)+"-01",e.month_name=this.locale["m"+t];var o=new Date(this.options.position.start.getFullYear(),t,1,0,0,0);return e.start=parseInt(o.getTime()),e.end=parseInt(new Date(this.options.position.start.getFullYear(),t+1,1,0,0,0).getTime()),e.events=this.getEventsBetween(e.start,e.end),this.options.templates["year-month"](e)},n.prototype._day=function(t,a){this._loadTemplate("month-day");var o={tooltip:"",cal:this},n=this.options.classes.months.outmonth,i=this.options.position.start.getDay();2==e(this,"first_day")?i++:i=0==i?7:i,a=a-i+1;var s=new Date(this.options.position.start.getFullYear(),this.options.position.start.getMonth(),a,0,0,0);a>0&&(n=this.options.classes.months.inmonth);var l=new Date(this.options.position.end.getTime()-1).getDate();if(a+1>l&&(this.stop_cycling=!0),a>l&&(a-=l,n=this.options.classes.months.outmonth),n=r.trim(n+" "+this._getDayClass("months",s)),a<=0){var d=new Date(this.options.position.start.getFullYear(),this.options.position.start.getMonth(),0).getDate();a=d-Math.abs(a),n+=" cal-month-first-row"}var h=this._getHoliday(s);return h!==!1&&(o.tooltip=h),o.data_day=s.getFullYear()+"-"+s.getMonthFormatted()+"-"+(a<10?"0"+a:a),o.cls=n,o.day=a,o.start=parseInt(s.getTime()),o.end=parseInt(o.start+864e5),o.events=this.getEventsBetween(o.start,o.end),this.options.templates["month-day"](o)},n.prototype._getHoliday=function(t){var e=!1;return r.each(a(this,t.getFullYear()),function(){var a=!1;if(r.each(this.days,function(){if(this.toDateString()==t.toDateString())return a=!0,!1}),a)return e=this.name,!1}),e},n.prototype._getHolidayName=function(t){var e=this._getHoliday(t);return e===!1?"":e},n.prototype._getDayClass=function(t,e){var a=this,o=function(e,o){var n;n=a.options.classes&&t in a.options.classes&&e in a.options.classes[t]?a.options.classes[t][e]:"","string"==typeof n&&n.length&&o.push(n)},n=[];e.toDateString()==(new Date).toDateString()&&o("today",n);var i=this._getHoliday(e);switch(i!==!1&&o("holidays",n),e.getDay()){case 0:o("sunday",n);break;case 6:o("saturday",n)}return o(e.toDateString(),n),n.join(" ")},n.prototype.view=function(t){if(t){if(!this.options.views[t].enable)return;this.options.view=t}this._init_position(),this._loadEvents(),this._render(),this.options.onAfterViewLoad.call(this,this.options.view)},n.prototype.navigate=function(t,e){var a=r.extend({},this.options.position);if("next"==t)switch(this.options.view){case"year":a.start.setFullYear(this.options.position.start.getFullYear()+1);break;case"month":a.start.setMonth(this.options.position.start.getMonth()+1);break;case"week":a.start.setDate(this.options.position.start.getDate()+7);break;case"day":a.start.setDate(this.options.position.start.getDate()+1)}else if("prev"==t)switch(this.options.view){case"year":a.start.setFullYear(this.options.position.start.getFullYear()-1);break;case"month":a.start.setMonth(this.options.position.start.getMonth()-1);break;case"week":a.start.setDate(this.options.position.start.getDate()-7);break;case"day":a.start.setDate(this.options.position.start.getDate()-1)}else"today"==t?a.start.setTime((new Date).getTime()):r.error(this.locale.error_where.format(t));this.options.day=a.start.getFullYear()+"-"+a.start.getMonthFormatted()+"-"+a.start.getDateFormatted(),this.view(),_.isFunction(e)&&e()},n.prototype._init_position=function(){var t,a,o;if("now"==this.options.day){var n=new Date;t=n.getFullYear(),a=n.getMonth(),o=n.getDate()}else if(this.options.day.match(/^\d{4}-\d{2}-\d{2}$/g)){var i=this.options.day.split("-");t=parseInt(i[0],10),a=parseInt(i[1],10)-1,o=parseInt(i[2],10)}else r.error(this.locale.error_dateformat.format(this.options.day));switch(this.options.view){case"year":this.options.position.start.setTime(new Date(t,0,1).getTime()),this.options.position.end.setTime(new Date(t+1,0,1).getTime());break;case"month":this.options.position.start.setTime(new Date(t,a,1).getTime()),this.options.position.end.setTime(new Date(t,a+1,1).getTime());break;case"day":this.options.position.start.setTime(new Date(t,a,o).getTime()),this.options.position.end.setTime(new Date(t,a,o+1).getTime());break;case"week":var s,l=new Date(t,a,o);s=1==e(this,"first_day")?l.getDate()-(l.getDay()+6)%7:l.getDate()-l.getDay(),this.options.position.start.setTime(new Date(t,a,s).getTime()),this.options.position.end.setTime(new Date(t,a,s+7).getTime());break;default:r.error(this.locale.error_noview.format(this.options.view))}return this},n.prototype.getTitle=function(){var t=this.options.position.start;switch(this.options.view){case"year":return this.locale.title_year.format(t.getFullYear());case"month":return this.locale.title_month.format(this.locale["m"+t.getMonth()],t.getFullYear());case"week":return this.locale.title_week.format(t.getWeek(e(this,"week_numbers_iso_8601")),t.getFullYear());case"day":return this.locale.title_day.format(this.locale["d"+t.getDay()],t.getDate(),this.locale["m"+t.getMonth()],t.getFullYear())}},n.prototype.getYear=function(){var t=this.options.position.start;return t.getFullYear()},n.prototype.getMonth=function(){var t=this.options.position.start;return this.locale["m"+t.getMonth()]},n.prototype.getDay=function(){var t=this.options.position.start;return this.locale["d"+t.getDay()]},n.prototype.isToday=function(){var t=(new Date).getTime();return t>this.options.position.start&&t<this.options.position.end},n.prototype.getStartDate=function(){return this.options.position.start},n.prototype.getEndDate=function(){return this.options.position.end},n.prototype._loadEvents=function(){var e=this,a=null;"events_source"in this.options&&""!==this.options.events_source?a=this.options.events_source:"events_url"in this.options&&(a=this.options.events_url,o("The events_url option is DEPRECATED and it will be REMOVED in near future. Please use events_source instead."));var n;switch(r.type(a)){case"function":n=function(){return a(e.options.position.start,e.options.position.end,p)};break;case"array":n=function(){return[].concat(a)};break;case"string":a.length&&(n=function(){var o=[],n=e.options.position.start,i=e.options.position.end,s={from:n.getTime(),to:i.getTime(),utc_offset_from:n.getTimezoneOffset(),utc_offset_to:i.getTimezoneOffset()};return p.length&&(s.browser_timezone=p),r.ajax({url:t(a,s),dataType:"json",type:"GET",async:!1}).done(function(t){t.success||r.error(t.error),t.result&&(o=t.result)}),o})}n||r.error(this.locale.error_loadurl),this.options.onBeforeEventsLoad.call(this,function(){e.options.events.length&&e.options.events_cache||(e.options.events=n(),e.options.events.sort(function(t,e){var a;return a=t.start-e.start,0==a&&(a=t.end-e.end),a})),e.options.onAfterEventsLoad.call(e,e.options.events)})},n.prototype._templatePath=function(t){return"function"==typeof this.options.tmpl_path?this.options.tmpl_path(t):this.options.tmpl_path+t+".html"},n.prototype._loadTemplate=function(t){if(!this.options.templates[t]){var e=this;r.ajax({url:e._templatePath(t),dataType:"html",type:"GET",async:!1,cache:this.options.tmpl_cache}).done(function(a){e.options.templates[t]=_.template(a)})}},n.prototype._update=function(){var t=this;r('*[data-toggle="tooltip"]').tooltip({container:this.options.tooltip_container}),r("*[data-cal-date]").click(function(){var e=r(this).data("cal-view");t.options.day=r(this).data("cal-date"),t.view(e)}),r(".cal-cell").dblclick(function(){var e=r("[data-cal-date]",this).data("cal-view");t.options.day=r("[data-cal-date]",this).data("cal-date"),t.view(e)}),this["_update_"+this.options.view](),this._update_modal()},n.prototype._update_modal=function(){var t=this;if(r("a[data-event-id]",this.context).unbind("click"),t.options.modal){var e=r(t.options.modal);if(e.length){var a=null;"iframe"==t.options.modal_type&&(a=r(document.createElement("iframe")).attr({width:"100%",frameborder:"0"})),r("a[data-event-id]",this.context).on("click",function(o){o.preventDefault(),o.stopPropagation();var n=r(this).attr("href"),i=r(this).data("event-id"),o=_.find(t.options.events,function(t){return t.id==i});"iframe"==t.options.modal_type&&(a.attr("src",n),r(".modal-body",e).html(a)),(!e.data("handled.bootstrap-calendar")||e.data("handled.bootstrap-calendar")&&e.data("handled.event-id")!=o.id)&&e.off("show.bs.modal").off("shown.bs.modal").off("hidden.bs.modal").on("show.bs.modal",function(){var a=r(this).find(".modal-body");switch(t.options.modal_type){case"iframe":var i=a.height()-parseInt(a.css("padding-top"),10)-parseInt(a.css("padding-bottom"),10);r(this).find("iframe").height(Math.max(i,50));break;case"ajax":r.ajax({url:n,dataType:"html",async:!1,success:function(t){a.html(t)}});break;case"template":t._loadTemplate("modal"),a.html(t.options.templates.modal({event:o,calendar:t}))}_.isFunction(t.options.modal_title)&&e.find(".modal-title").html(t.options.modal_title(o))}).on("shown.bs.modal",function(){t.options.onAfterModalShown.call(t,t.options.events)}).on("hidden.bs.modal",function(){t.options.onAfterModalHidden.call(t,t.options.events)}).data("handled.bootstrap-calendar",!0).data("handled.event-id",o.id),e.modal("show")})}}},n.prototype._update_day=function(){r("#cal-day-panel").height(r("#cal-day-panel-hour").height())},n.prototype._update_week=function(){},n.prototype._update_year=function(){this._update_month_year()},n.prototype._update_month=function(){this._update_month_year();var t=this;if(1==this.options.weekbox){var a=r(document.createElement("div")).attr("id","cal-week-box"),o=this.options.position.start.getFullYear()+"-"+this.options.position.start.getMonthFormatted()+"-";t.context.find(".cal-month-box .cal-row-fluid").on("mouseenter",function(){var n=new Date(t.options.position.start),i=r(".cal-cell1:first-child .cal-month-day",this),s=i.hasClass("cal-month-first-row")?1:r("[data-cal-date]",i).text();n.setDate(parseInt(s)),s=s<10?"0"+s:s,a.html(t.locale.week.format(1==t.options.display_week_numbers?n.getWeek(e(t,"week_numbers_iso_8601")):"")),a.attr("data-cal-week",o+s).show().appendTo(i)}).on("mouseleave",function(){a.hide()}),a.click(function(){t.options.day=r(this).data("cal-week"),t.view("week")})}t.context.find("a.event").mouseenter(function(){r('a[data-event-id="'+r(this).data("event-id")+'"]').closest(".cal-cell1").addClass("day-highlight dh-"+r(this).data("event-class"))}),t.context.find("a.event").mouseleave(function(){r("div.cal-cell1").removeClass("day-highlight dh-"+r(this).data("event-class"))})},n.prototype._update_month_year=function(){if(this.options.views[this.options.view].slide_events){var t=this,e=r(document.createElement("div")).attr("id","cal-day-tick").html('<i class="icon-chevron-down glyphicon glyphicon-chevron-down"></i>');t.context.find(".cal-month-day, .cal-year-box .span3").on("mouseenter",function(){0!=r(".events-list",this).length&&r(this).children("[data-cal-date]").text()!=t.activecell&&e.show().appendTo(this)}).on("mouseleave",function(){e.hide()}).on("click",function(o){0!=r(".events-list",this).length&&r(this).children("[data-cal-date]").text()!=t.activecell&&i(o,e,a,t)});var a=r(document.createElement("div")).attr("id","cal-slide-box");a.hide().click(function(t){t.stopPropagation()}),this._loadTemplate("events-list"),e.click(function(e){i(e,r(this),a,t)})}},n.prototype.getEventsBetween=function(t,e){var a=[];return r.each(this.options.events,function(){if(null==this.start)return!0;var o=this.end||this.start;parseInt(this.start)<e&&parseInt(o)>=t&&a.push(this)}),a},r.fn.calendar=function(t){return new n(t,this)}});