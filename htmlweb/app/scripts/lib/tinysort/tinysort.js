/**
 * TinySort is a small and simple script that will sort any nodeElment by it's text- or attribute value, or by that of one of it's children.
 * @summary A nodeElement sorting script.
 * @version 2.1.1
 * @license MIT/GPL
 * @author Ron Valstar (http://www.sjeiti.com/)
 * @copyright Ron Valstar <ron@ronvalstar.nl>
 * @namespace tinysort
 * @todo check place option
 */

!function(e,t){"use strict";function r(){return t}"function"==typeof define&&define.amd?define("tinysort",r):e.tinysort=t}(this,function(){"use strict";function e(e){function a(){0===arguments.length?l({}):n(arguments,function(e){l(r(e)?{selector:e}:e)}),g=M.length}function l(e){var t=!!e.selector,r=t&&":"===e.selector[0],n=o(e||{},S);M.push(o({bFind:t,bAttr:!(n.attr===i||""===n.attr),bData:n.data!==i,bFilter:r,mFilter:i,fnSort:n.sortFunction,iAsc:"asc"===n.order?1:-1},n))}function h(){n(e,function(e,t){N?N!==e.parentNode&&(q=!1):N=e.parentNode;var r=M[0],n=r.bFilter,o=r.selector,a=!o||n&&e.matchesSelector(o)||o&&e.querySelector(o),c=a?C:D,s={elm:e,pos:t,posn:c.length};w.push(s),c.push(s)}),A=C.slice(0)}function y(){C.sort(b)}function b(e,o){var a=0;for(0!==v&&(v=0);0===a&&v<g;){var i=M[v],l=i.ignoreDashes?d:p;if(n(m,function(e){var t=e.prepare;t&&t(i)}),i.sortFunction)a=i.sortFunction(e,o);else if("rand"==i.order)a=Math.random()<.5?1:-1;else{var u=s,h=t(e,i),y=t(o,i);if(!i.forceStrings){var S=r(h)?h&&h.match(l):s,b=r(y)?y&&y.match(l):s;if(S&&b){var F=h.substr(0,h.length-S[0].length),A=y.substr(0,y.length-b[0].length);F==A&&(u=!s,h=f(S[0]),y=f(b[0]))}}a=h===c||y===c?0:i.iAsc*(h<y?-1:h>y?1:0)}n(m,function(e){var t=e.sort;t&&(a=t(i,u,h,y,a))}),0===a&&v++}return 0===a&&(a=e.pos>o.pos?1:-1),a}function F(){var e=C.length===w.length;q&&e?(C.forEach(function(e){E.appendChild(e.elm)}),N.appendChild(E)):(C.forEach(function(e){var t=e.elm,r=u.createElement("div");e.ghost=r,t.parentNode.insertBefore(r,t)}),C.forEach(function(e,t){var r=A[t].ghost;r.parentNode.insertBefore(e.elm,r),r.parentNode.removeChild(r)}))}r(e)&&(e=u.querySelectorAll(e)),0===e.length&&console.warn("No elements to sort");var A,N,E=u.createDocumentFragment(),w=[],C=[],D=[],M=[],q=!0;return a.apply(i,Array.prototype.slice.call(arguments,1)),h(),y(),F(),C.map(function(e){return e.elm})}function t(e,t){var n,o=e.elm;return t.selector&&(t.bFilter?o.matchesSelector(t.selector)||(o=i):o=o.querySelector(t.selector)),t.bAttr?n=o.getAttribute(t.attr):t.useVal?n=o.value:t.bData?n=o.getAttribute("data-"+t.data):o&&(n=o.textContent),r(n)&&(t.cases||(n=n.toLowerCase()),n=n.replace(/\s+/g," ")),n}function r(e){return"string"==typeof e}function n(e,t){for(var r,n=e.length,o=n;o--;)r=n-o-1,t(e[r],r)}function o(e,t,r){for(var n in t)(r||e[n]===c)&&(e[n]=t[n]);return e}function a(e,t,r){m.push({prepare:e,sort:t,sortBy:r})}var c,s=!1,i=null,l=window,u=l.document,f=parseFloat,h=Array.prototype.indexOf,p=/(-?\d+\.?\d*)$/g,d=/(\d+\.?\d*)$/g,m=[],g=0,v=0,y="2.1.0",S={selector:i,order:"asc",attr:i,data:i,useVal:s,place:"start",returns:s,cases:s,forceStrings:s,ignoreDashes:s,sortFunction:i};return l.Element&&function(e){e.matchesSelector=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,r=(t.parentNode||t.document).querySelectorAll(e),n=-1;r[++n]&&r[n]!=t;);return!!r[n]}}(Element.prototype),o(a,{indexOf:h,loop:n}),o(e,{plugin:a,version:y,defaults:S})}());