"use strict";define([],function(){return function(){var e;return{init:function(e,t,i,s,a,l,o){e?this.id=e:this.id=i,this.e_id=e,this.labelName=t.labelName,this.label_id=i,this.e_cont_id=s,this.isNew=a,this.labelReplacedBy=l,this.setReset=!1,this.elXYpos={x:t.x,y:t.y},this.labelXYpos={x:t.e_x,y:t.e_y},this.makeDraggable(),this.setDragEl(o)},makeDraggable:function(){var t=this;$("#"+this.id).draggable({cursor:"default",drag:function(e,i){var s=$(i.helper).attr("id"),a=s.split("_");a=a[1];var l=document.getElementById("label_"+a);l&&t.drawLine(a,"",!0),$(".rightClickMenu").css("display","none")},stop:function(i,s){var a=t.getDragEl(),l=$(s.helper).attr("id");$(s.target).removeClass("dragDropLabelHover");for(var o=0;o<a.length;o++)a[o].e_id==l&&(e=a[o].getDroppedBool(),e||a[o].resetLabel())}})},setDroppedBool:function(e){this.droppedBool=e},getDroppedBool:function(){return this.droppedBool},resetLabel:function(){$("#"+this.label_id).remove();var e=this.e_id.split("_");e=e[1],$("#lineDiv"+e).remove(),$("#"+this.e_id).remove(),this.isNew?$("#"+this.e_cont_id).append('<div id="'+this.e_id+'" class="dragDropLabelRed">'+this.labelName+"</div>"):$("#"+this.e_cont_id).append('<div id="'+this.e_id+'" class="dragDropLabelBlack"><div>'+this.labelName+'</div><div class="labelReplacedBy">'+this.labelReplacedBy+"</div></div>"),this.makeDraggable(),this.setDroppedBool(!1),this.resetPostions()},setPositions:function(e,t){this.elXYpos=e,this.labelXYpos=t},resetPostions:function(){this.elXYpos.x=-1,this.elXYpos.y=-1,this.labelXYpos.x=-1,this.labelXYpos.y=-1},drawLine:function(e,t,i){if(!i)if(t)var s="lineStyleRed";else var s="lineStyleBlack";var a=1,l=$("#e_"+e).position(),o=$("#label_"+e).position(),r=l.left,d=l.top,n=o.left,p=o.top,h=Math.sqrt((n-r)*(n-r)+(p-d)*(p-d)),c=(r+n)/2-h/2,g=(d+p)/2-a/2,f=Math.atan2(d-p,r-n)*(180/Math.PI);if(i)$("#lineDiv"+e).css({left:c+"px",top:g+"px",width:h+"px",transform:"rotate("+f+"deg)"});else{var v='<div id="lineDiv'+e+'" class="'+s+'" style="left:'+c+"px; top:"+g+"px; width:"+h+"px; -moz-transform:rotate("+f+"deg); -webkit-transform:rotate("+f+"deg); -o-transform:rotate("+f+"deg); -ms-transform:rotate("+f+"deg); transform:rotate("+f+'deg);" />';$("#dropWrapper").append(v)}},setDragEl:function(e){this.dragElements=e},getDragEl:function(e){return this.dragElements}}}});