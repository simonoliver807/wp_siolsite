define(["three"],function(t){"use strict";var t,e={};return e.ToRad=Math.PI/180,e.ToDeg=180/Math.PI,e.msePos=new t.Vector3(0,0,0),e.startRender=0,e.bincam=1,e.exdrone1,e.exdrone2,e.exdrone3,e.phasers,e.dphasers,e.mesharrpos={phasers:0,dphasers:0,drones:0},e.grouppart=new t.Object3D,e.ms1phaser=new t.Group,e.ms2phaser=new t.Group,e.percom=document.getElementById("perCom"),e.View=function(e,i,s){var r=document.getElementById("container");this.w=r.clientWidth,this.h=r.clientHeight,this.id="container",this.init(e,i,s),this.initBasic(),this.sight,this.startRot={issleeping:1,rot:0,axis:new t.Vector3},this.world},e.View.prototype={constructor:e.View,init:function(i,s,r){this.clock=new t.Clock,this.renderer=new t.WebGLRenderer({precision:"mediump",antialias:!1}),this.renderer.setSize(this.w,this.h),this.renderer.setClearColor(0,1),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.autoClear=!0,this.camera=new t.PerspectiveCamera(60,this.w/this.h,.1,1e4),this.camera.useQuarternion=!0;var o=document.getElementById("insideship");"clicked inside"==o.value?e.bincam=0:e.bincam=1,e.bincam?(this.camera.position.z=10,this.tmpVCPprev=new t.Vector3(0,0,10),this.camdist=9.9,this.regulaterot=.1):(this.camera.position.z=.1,this.tmpVCPprev=new t.Vector3(0,0,.1),this.camdist=.09,this.regulaterot=.01),this.camera.matrixAutoUpdate=!0,this.camAngle=-.025,this.msechngdir,this.chngeindir=!1,this.scene=new t.Scene,this.scene.background=new t.Color(0),this.container=document.getElementById(this.id),this.renderer.domElement.id="gamecanvas",this.container.appendChild(this.renderer.domElement),this.miniMap=null,this.player=null,this.raycaster=new t.Raycaster,this.matrixWorld=new t.Matrix4,this.matrix2=new t.Matrix4,this.matrix3=new t.Matrix4,this.cpn=new t.Vector3(0,0,0),this.len=0,this.cp=new t.Vector3,this.camdir=new t.Vector3,this.tusv=new t.Vector3,this.containerMesh=0,this.mothership,this.camrot=new t.Vector3,this.pbrot=new t.Vector3,this.newsightpos=new t.Vector3,this.dir=new t.Vector3,this.bodys=[],this.velocity=1,this.reverse=!1,this.heading=new t.Vector3,this.shootStart=new t.Vector3,this.paobj=[[0,0],[1,8],[2,12],[3,15],[4,17],[5,19],[6,22],[7,24],[8,26],[9,28],[10,29],[11,30],[12,31],[13,33],[14,34],[15,35],[16,36],[17,37],[18,38],[19,39]],this.drota=0,this.ldh=new t.Vector3(0,0,1),this.bincount=0,this.dpcnt=0,this.tmpCM=new t.Vector3,this.tmpVCP=new t.Vector3,this.rotaxis=new t.Vector3,this.rotdir=new t.Vector3,this.rottmpCM=new t.Vector3,this.up=new t.Vector3(0,1,0),this.addforce=!1,this.minusforce=!1,this.f=new t.Vector3,this.u=new t.Vector3,this.s=new t.Vector3,this.dronetex,e.grouppart.name="grouppart",this.scene.add(e.grouppart),this.ms1pos=new t.Vector3(0,0,0),this.ms2pos=new t.Vector3(0,0,0),this.distms=new t.Vector3(0,0,0)},initBackground:function(){var e=new t.SphereGeometry(1e4,32,32),i=(new t.TextureLoader).load("images/space_bg.png"),s=new t.MeshBasicMaterial({map:i,side:t.BackSide}),r=new t.Mesh(e,s);r.name="bg",r.position.set(0,0,-200),this.scene.add(r)},initLight:function(){var e=new t.DirectionalLight(16777215,1.2);e.position.set(0,-1,0),e.name="dirlight";var i=new t.DirectionalLight(16777215,1.2);i.position.set(0,1,0),i.name="dirlight",this.scene.add(e),this.scene.add(i)},initPoints:function(){for(var e=500,i=new t.BufferGeometry,s=new Float32Array(3*e),r=0;r<s.length;r++){var o=this.randMinMax(-11e3,11e3),a=this.randMinMax(-11e3,11e3),n=this.randMinMax(-11e3,11e3);s[r]=o,s[r+1]=a,s[r+2]=n}i.addAttribute("position",new t.BufferAttribute(s,3)),i.computeBoundingSphere();var h=new t.Points(i,new t.PointsMaterial({size:15,color:"#ffffff"}));h.name="points",this.scene.add(h)},expart:function(){var e=150,i=new t.BufferGeometry,s=new Float32Array(3*e);i.addAttribute("position",new t.BufferAttribute(s,3)),i.computeBoundingSphere();var r=new t.Points(i,new t.PointsMaterial({size:2,color:"#ffff00"}));return r.name="points1",r.visible=!0,r.geometry.attributes.position.setDynamic(!0),r},render:function(){0!==this.startRot.rot&&0!=this.containerMesh&&this.applyRot(),this.renderer.render(this.scene,this.camera)},initBasic:function(){var e={};e.boxTarget=new t.BoxGeometry(50,50,50),e.containerMesh=new t.SphereGeometry(8),e.phaser=new t.SphereGeometry(.5,32,32),e.dphaser=new t.SphereGeometry(1,32,32),e.mercury=new t.SphereBufferGeometry(750,16,12),e.shp1=new t.SphereGeometry(.1),e.sight=new t.BoxGeometry(15,15,.5),e.mothershipbb1=new t.BoxGeometry(700,300,700,10,10,10),e.mothershipbb2=new t.BoxGeometry(1600,300,300,10,10,10),e.moon=new t.SphereGeometry(500,16,12),e.msphaser=new t.CylinderGeometry(5,5,20),this.geos=e},addBox:function(e){if(e.image&&"mothership"!=e.name){var i="images/"+e.image,s=new t.MeshBasicMaterial;s.map=(new t.TextureLoader).load(i),s.transparent=!0}if("mothership"==e.name){"ms/ms.obj"==e.image?this.ms1pos.set(e.pos[0],e.pos[1],e.pos[2]):this.ms2pos.set(e.pos[0],e.pos[1],e.pos[2]);var r="";return void this.loadOBJ(r,this.scene,e)}if(!e.image){var s=new t.MeshBasicMaterial({color:e.color,wireframe:e.wireframe,name:e.name,transparent:e.transparent,opacity:e.opacity});e.wireframe&&(s.wireframe=!0)}var o=new t.Mesh(this.geos[e.name],s,e.name);if(o.position.set(e.pos[0],e.pos[1],e.pos[2]),"mothershipbb1"==o.name){var a=new t.Vector3(0,1,0);o.rotateOnAxis(a,-.55)}this.scene.add(o),"sight"==o.name&&(this.sight=o)},addCylinder:function(i,s){if(i.length>0){var r=this.loadTGA("images/Free_Droid/Materials/BaseMaterial_normal.tga");return this.dronetex=r,void this.loadOBJ(r,this.scene,i)}if("ms1phaser"==i.name){var o=new t.MeshBasicMaterial({color:i.color}),a=[];a[0]=[342,50,0],a[1]=[277,-52,0],a[2]=[-320,52,0],a[3]=[-270,-52,0];for(var n=0;n<4;){var h=new t.Mesh(this.geos.msphaser,o,i.name);h.quaternion.setFromAxisAngle(new t.Vector3(0,0,1),1.57);var l=new t.Quaternion(h.quaternion.x,h.quaternion.y,h.quaternion.z,h.quaternion.w);h.quaternion.setFromAxisAngle(new t.Vector3(0,1,0),1),h.quaternion.multiply(l),h.position.set(a[n][0],a[n][1],a[n][2]),e.ms1phaser.add(h),n++}return e.ms1phaser.name="ms1phaser",e.ms1phaser.position.set(s[0],s[1],s[2]),void this.scene.add(e.ms1phaser)}if("ms2phaser"==i.name){var o=new t.MeshBasicMaterial({color:i.color}),a=[];a[0]=[110,100,-100],a[2]=[110,100,150],a[1]=[-300,100,-50],a[3]=[-300,100,50];for(var n=0;n<4;){var h=new t.Mesh(this.geos.msphaser,o,i.name);h.quaternion.setFromAxisAngle(new t.Vector3(0,0,1),1.57);var l=new t.Quaternion(h.quaternion.x,h.quaternion.y,h.quaternion.z,h.quaternion.w);h.position.set(a[n][0],a[n][1],a[n][2]),e.ms2phaser.add(h),n++}return e.ms2phaser.name="ms2phaser",e.ms2phaser.position.set(s[0],s[1],s[2]),void this.scene.add(e.ms2phaser)}this.loadOBJ(this.dronetex,this.scene,i)},addSphere:function(e){if("moon"==e.name||"mercury"==e.name){var i="images/"+e.image,s=(new t.TextureLoader).load(i),r=new t.MeshBasicMaterial({map:s}),o=new t.Mesh(this.geos[e.name],r,e.name);o.position.set(e.pos[0],e.pos[1],e.pos[2]),this.scene.add(o)}if("containerMesh"==e.name&&0!=e.image){var s="";this.loadOBJ(s,this.scene,e)}if("containerMesh"==e.name&&0===e.image){var r=new t.MeshBasicMaterial({color:e.color,wireframe:e.wireframe,name:e.name,transparent:e.transparent,opacity:e.opacity}),o=new t.Mesh(this.geos[e.name],r,e.name);o.position.set(e.pos[0],e.pos[1],e.pos[2]),this.scene.add(o)}if("phasers"==e.name||"dphasers"==e.name){var s=(new t.TextureLoader).load(e.texture);this.loadOBJ(s,this.scene,e)}if("shp1"==e.name){var r=new t.MeshBasicMaterial({color:e.color,wireframe:e.wireframe,name:e.name,transparent:e.transparent,opacity:e.opacity}),o=new t.Mesh(this.geos[e.name],r,e.name);o.position.set(e.pos[0],e.pos[1],e.pos[2]),this.scene.add(o)}if("phaser"==e.name){var r=new t.MeshBasicMaterial({color:e.color,wireframe:e.wireframe,name:e.name,transparent:e.transparent,opacity:e.opacity}),o=new t.Mesh(this.geos[e.name],r,e.name);o.position.set(e.pos[0],e.pos[1],e.pos[2]),this.scene.add(o)}},gs_mse_pos:function(t,e){return"get"==t?this.sight.position:(this.sight.position.x=e.x,this.sight.position.y=e.y,this.sight.position.z=e.z,void 0)},getPlayerDir:function(e,i){var s=new t.Vector3;if("forward"==e){var r=this.gs_mse_pos("get");s=s.subVectors(r,i)}else s=s.subVectors(i,this.gs_mse_pos("get"));return s.normalize()},updateSightPos:function(){this.cp.setFromMatrixPosition(this.camera.matrixWorld),this.len=this.cp.length(),this.matrixWorld.copy(this.camera.matrixWorld),this.cpn.x=this.matrixWorld.elements[12],this.cpn.y=this.matrixWorld.elements[13],this.cpn.z=this.matrixWorld.elements[14],this.cpn.normalize(),this.matrixWorld.setPosition(this.cpn),this.matrix2.multiplyMatrices(this.matrixWorld,this.matrix2.getInverse(this.camera.projectionMatrix));var i=new t.Vector3(e.msePos.x,e.msePos.y,.5);i.applyProjection(this.matrix2),this.dir.copy(i.sub(this.cpn).normalize()),this.newsightpos.addVectors(this.camera.position,this.dir.multiplyScalar(100)),this.sight.position.set(this.newsightpos.x,this.newsightpos.y,this.newsightpos.z),this.camdir.subVectors(this.camera.position,this.containerMesh.position).normalize();var s=new t.Quaternion;s.setFromAxisAngle(this.camdir,Math.PI/2),this.sight.up.set(s.x,s.y,s.z),this.tusv.subVectors(this.sight.position,this.containerMesh.position);var r=this.lookAtFunc(this.tusv,this.sight.up);this.sight.quaternion.setFromRotationMatrix(r),this.tusv.subVectors(this.sight.position,this.containerMesh.position);var r=this.lookAtFunc(this.tusv,this.up);this.containerMesh.quaternion.setFromRotationMatrix(r)},applyRot:function(){if(this.rotdir.subVectors(this.camera.position,this.containerMesh.position),void 0===this.msechngdir&&(this.msechngdir=this.startRot.rot),this.msechngdir.charAt(0)!==this.startRot.rot.charAt(0)&&(this.chngeindir=!0,this.msechngdir=this.startRot.rot),this.rotdir.y>-this.camdist&&this.rotdir.y<this.camdist||this.chngeindir)this.rotaxis.subVectors(this.tmpCM,e.msePos),this.rotaxis.z=0,this.rotaxis.set(this.rotaxis.y,this.rotaxis.x*-1,this.rotaxis.z),this.rotaxis.applyEuler(this.camera.rotation),this.tmpVCP.copy(this.tmpVCPprev),this.tmpVCP.applyAxisAngle(this.rotaxis,this.camAngle),this.tmpVCP.x-=this.tmpVCPprev.x,this.tmpVCP.y-=this.tmpVCPprev.y,this.tmpVCP.z-=this.tmpVCPprev.z,this.chngeindir&&(this.chngeindir=!1,this.tmpVCPprev.y+this.tmpVCP.y>this.camdist?(this.tmpVCP.y=this.tmpVCPprev.y-(this.camdist-this.regulaterot),this.tmpVCP.y*=-1):this.tmpVCPprev.y+this.tmpVCP.y<-this.camdist&&(this.tmpVCP.y=this.tmpVCPprev.y+(this.camdist-this.regulaterot),this.tmpVCP.y*=-1)),this.tmpVCPprev.x+=this.tmpVCP.x,this.tmpVCPprev.y+=this.tmpVCP.y,this.tmpVCPprev.z+=this.tmpVCP.z,this.camrot.x=this.tmpVCP.x,this.camrot.y=this.tmpVCP.y,this.camrot.z=this.tmpVCP.z;else{if("ul"==this.startRot.rot||"dl"==this.startRot.rot)var t=.025;else var t=-.025;this.tmpVCP.copy(this.tmpVCPprev),this.tmpVCP.applyAxisAngle(this.up,t),this.tmpVCP.x-=this.tmpVCPprev.x,this.tmpVCP.y-=this.tmpVCPprev.y,this.tmpVCP.z-=this.tmpVCPprev.z,this.tmpVCPprev.x+=this.tmpVCP.x,this.tmpVCPprev.y+=this.tmpVCP.y,this.tmpVCPprev.z+=this.tmpVCP.z,this.camrot.x=this.tmpVCP.x,this.camrot.y=this.tmpVCP.y,this.camrot.z=this.tmpVCP.z}},lookAtFunc:function(e,i){var s=new t.Matrix4,r=s.elements;return this.f=e.normalize(),this.u.crossVectors(i,this.f).normalize(),this.s.crossVectors(this.f,this.u).normalize(),r[0]=this.u.x,r[4]=this.s.x,r[8]=this.f.x,r[1]=this.u.y,r[5]=this.s.y,r[9]=this.f.y,r[2]=this.u.z,r[6]=this.s.z,r[10]=this.f.z,s},addForce:function(){var t=this.bodys[0].body,e=this.getPlayerDir("forward",this.containerMesh.position),i=e.equals(this.heading);if(i||this.heading.set(e.x,e.y,e.z),(this.startRot.rot||!i||t.linearVelocity.length()<15)&&t.linearVelocity.length()<40&&(e.multiplyScalar(25),t.linearVelocity.addTime(e,this.world.timeStep),t.linearVelocity.length()>40))for(var s=-2;t.linearVelocity.length()>40;)e.multiplyScalar(s),t.linearVelocity.addTime(e,this.world.timeStep),s--;i&&t.linearVelocity.length()<40&&(e.multiplyScalar(15),t.linearVelocity.addTime(e,this.world.timeStep));var r=t.linearVelocity.length()/40*100-5;accel.style.width=r+"%",t.linearVelocity.length()<5&&this.reverse&&(this.reverse=!1),this.velocity=1+t.linearVelocity.length()/10},minusForce:function(){var e=this.bodys[0].body,i=new t.Vector3(e.linearVelocity.x,e.linearVelocity.y,e.linearVelocity.z),s=i.length();if(0==i.x&&0==i.y&&0==i.z||this.reverse){var r=this.getPlayerDir("reverse",this.containerMesh.position);if(s<40&&(r.multiplyScalar(15),e.linearVelocity.addTime(r,this.world.timeStep),this.reverse=!0),e.linearVelocity.length()>40)for(var o=-2;e.linearVelocity.length()>40;)r.multiplyScalar(o),e.linearVelocity.addTime(r,this.world.timeStep),o--}else i=i.normalize(),i=i.multiplyScalar(s-.5),e.linearVelocity.copy(i),s<1&&(this.reverse=!0);var a=e.linearVelocity.length()/40*100-5;accel.style.width=a+"%",this.velocity=1+e.linearVelocity.length()/10},phaser:function(i){var i=this.getPlayerDir("forward",this.containerMesh.position),s=2e3;i.x*=s,i.y*=s,i.z*=s,e.bincam?(this.shootStart.subVectors(this.containerMesh.position,this.camera.position),this.shootStart.normalize(),this.shootStart.multiplyScalar(30),this.shootStart.addVectors(this.shootStart,this.containerMesh.position)):(this.shootStart.subVectors(this.sight.position,this.containerMesh.position),this.shootStart.normalize(),this.shootStart.multiplyScalar(50),this.shootStart.addVectors(this.shootStart,this.containerMesh.position));var r=e.phasers.children[0].clone();r.visible=!0,r.position.set(this.shootStart.x,this.shootStart.y,this.shootStart.z),e.phasers.children.push(r);var o={type:"sphere",size:[1.5,1.5,1.5],pos:[this.shootStart.x,this.shootStart.y,this.shootStart.z],move:"true",world:this.world,allowSleep:!1,name:"phaser",density:20},a=this.addPhaser(o,r);a.body.linearVelocity.addTime(i,this.world.timeStep);var n=new t.Vector3(this.bodys[0].body.linearVelocity.x,this.bodys[0].body.linearVelocity.y,this.bodys[0].body.linearVelocity.z);n.normalize();for(var h=(this.bodys[0].body.linearVelocity,this.bodys[0].body.linearVelocity.length()),l=0;l<this.paobj.length-1;l++)if(h>this.paobj[l][1]&&h<this.paobj[l+1][1])var p=this.paobj[l+1][1]-this.paobj[l][1],m=(h-this.paobj[l][1])/p+this.paobj[l][0];n.multiplyScalar(h+m),a.body.linearVelocity.addEqual(n)},updateDrones:function(i,s,r){if(!s.userData.rtm){var o=(i.linearVelocity.length(),new t.Vector3(this.ldh.x,this.ldh.y,this.ldh.z).normalize());this.ldh.subVectors(this.containerMesh.position,s.position);var a=Math.round(this.ldh.length());this.ldh.normalize();var n=this.lookAtFunc(this.ldh,this.up),h=new t.Quaternion;h.setFromRotationMatrix(n),i.setQuaternion(h);var l=2*Math.acos(h.w);if(0===s.userData.bincount){if(this.drota!=l){var p=this.drota-l;p<0&&(p*=-1);var m=p;p<=.01&&(m*=100),p>.01&&p<=.1&&(m*=100),p>.1&&p<1&&(m*=10),o.multiplyScalar(-m),i.linearVelocity.addTime(o,this.world.timeStep),this.drota=l}}else a<=1500&&this.normalizelv(i,2,this.ldh),a>1500&&a<=4e3&&this.normalizelv(i,7,this.ldh),a>4e3&&a<=1e4&&this.normalizelv(i,10,this.ldh),a>1e4&&(this.ldh.multiplyScalar(15),i.linearVelocity.addTime(this.ldh,this.world.timeStep));if(s.userData.dpcnt>100&e.dphasers.children.length<200){var c=new t.Vector3(this.ldh.x,this.ldh.y,this.ldh.z);c.normalize;var m=10*c.length();c.x*=m,c.y*=m,c.z*=m,this.shootStart.subVectors(this.containerMesh.position,s.position),this.shootStart.normalize(),this.shootStart.addVectors(this.shootStart,s.position);var d=e.dphasers.children[0].clone();d.position.set(this.shootStart.x,this.shootStart.y,this.shootStart.z),d.visible=!0,e.dphasers.add(d);var u={type:"sphere",size:[.3,.3,.3],pos:[this.shootStart.x,this.shootStart.y,this.shootStart.z],move:"true",world:this.world,name:"dphaser"},y=this.addPhaser(u,d);y.body.linearVelocity.addTime(c,this.world.timeStep),s.userData.dpcnt=0}else s.userData.dpcnt+=1;1==r&&this.distms.subVectors(this.ms1pos,s.position),2==r&&this.distms.subVectors(this.ms2pos,s.position);var w=this.distms.length();w>12e3&&(s.userData.rtm=1)}if(s.userData.rtm){1==r&&this.distms.subVectors(this.ms1pos,s.position),2==r&&this.distms.subVectors(this.ms2pos,s.position);var w=this.distms.length();w>2e3?(this.distms.normalize(),this.distms.x*=100,this.distms.y*=100,this.distms.z*=100,i.linearVelocity.addTime(this.distms,this.world.timeStep)):(s.userData.rtm=0,s.userData.ld=0)}s.userData.bincount?s.userData.bincount=0:s.userData.bincount=1},normalizelv:function(t,e,i){t.linearVelocity.length()>=e+1&&(t.linearVelocity.normalize(t.linearVelocity),t.linearVelocity.multiplyScalar(e)),i.multiplyScalar(e),t.linearVelocity.addTime(i,this.world.timeStep)},getObjHeading:function(t,e){return t.applyQuaternion(e).negate()},onProgress:function(t){if(t.lengthComputable){var i=t.loaded/t.total*100;e.percom.innerHTML="  Current "+Math.round(i,2)+"% downloaded "}},onError:function(t){console.log(t);var e=document.getElementById("errScreen");e.innerHTML="<div id='errdiv'><p>"+t.target.responseURL+"</p><p>"+t.target.statusText+"</p><p>"+t.target.status+"</p></div>",e.style.display="block"},loadTGA:function(i){var s=new t.TGALoader,i=s.load(i,function(t){},e.View.prototype.onProgress,e.View.prototype.onError);return i},loadOBJ:function(i,s,r){if(r[0]||"e"==r.name.charAt(0)||"phasers"==r.name||"dphasers"==r.name){if(r[0])var o=r[0].image;else var o=r.image;var a=new t.OBJLoader;a.load("images/"+o,function(o){if(o.traverse(function(e){e instanceof t.Mesh&&("MultiMaterial"==e.material.type&&(e.material.materials[0].map=i),"MeshPhongMaterial"==e.material.type&&(e.material.map=i))}),r[0]&&"drone"==r[0].name){for(var a=0;a<r.length;a++)if(0==a)o.children[0].position.set(r[a].pos[0],r[a].pos[1],r[a].pos[2]),o.children[0].name="drone",o.children[0].userData.dpcnt=0,o.children[0].userData.rtm=0,o.children[0].userData.ld=0;else{var n=o.children[0].clone();n.position.set(r[a].pos[0],r[a].pos[1],r[a].pos[2]),o.add(n)}o.name="drones",e.mesharrpos.drones=s.children.length,s.add(o)}"drones"!=o.name&&(o.name=r.name),"exdrone3"==o.name&&(o.userData.active=!1,e.exdrone3=o,e.exdrone3.children[0].visible=!1,s.add(e.exdrone3)),"exdrone2"==o.name&&(o.userData.active=!1,e.exdrone2=o,e.exdrone2.children[0].visible=!1,s.add(e.exdrone2)),"exdrone1"==o.name&&(o.userData.active=!1,e.exdrone1=o,e.exdrone1.children[0].visible=!1,s.add(e.exdrone1)),"phasers"==o.name&&(e.phasers=o,e.phasers.children[0].visible=!1,e.phasers.children[0].name="phaser",e.mesharrpos.phasers=s.children.length,s.add(e.phasers)),"dphasers"==o.name&&(e.dphasers=o,e.dphasers.children[0].visible=!1,e.dphasers.children[0].name="dphaser",e.mesharrpos.dphasers=s.children.length,s.add(e.dphasers)),"mothership"==o.name&&s.add(o),e.startRender+=1},e.View.prototype.onProgress,e.View.prototype.onError)}else{var o=r.image,n=r.mtl;t.Loader.Handlers.add(/\.dds$/i,new t.DDSLoader);var h=new t.MTLLoader;h.load("images/"+n,function(i){i.preload();var a=new t.OBJLoader;a.setMaterials(i),a.load("images/"+o,function(t){t.position.set(r.pos[0],r.pos[1],r.pos[2]),t.name=r.name,s.add(t),e.startRender+=1},e.View.prototype.onProgress,e.View.prototype.onError)})}},setBodys:function(t){this.bodys.push(t)},setWorld:function(t){this.world=t},tvec:function(e,i,s){return new t.Vector3(e,i,s)},whcam:function(){var t=this.camera.fov*Math.PI/180,e=2*Math.tan(t/2)*300,i=this.w/this.h,s=e*i;return{h:e,w:s}},randMinMax:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},log:function(t,e){"ojbect"==typeof e?(console.log(t),console.log(e)):console.log(t+" "+e)}},e});